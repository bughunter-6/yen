<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>about:blank Doc PiP Test</title>
</head>
<body>
  <button onclick="openPopup()">Open about:blank Popup</button>

  <script>
    function openPopup() {
      const w = window.open("about:blank", "_blank");

      w.document.open();
      w.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>Injected about:blank</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              background: #111;
              color: #fff;
              display: flex;
              align-items: center;
              justify-content: center;
              height: 100vh;
            }
            button {
              padding: 14px 22px;
              font-size: 16px;
              cursor: pointer;
            }
          </style>
        </head>
        <body>
          <button id="pip">Open Document PiP</button>

          <script>
            document.getElementById("pip").onclick = async () => {
              if (!window.documentPictureInPicture) {
                alert("Document PiP not supported");
                return;
              }

              try {
                const pipWindow =
                  await documentPictureInPicture.requestWindow({
                    width: 360,
                    height: 240
                  });

                pipWindow.document.body.innerHTML = \`
                  <style>
                    body {
                      margin: 0;
                      background: #1e1e1e;
                      color: white;
                      font-family: sans-serif;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      height: 100vh;
                    }
                    .card {
                      background: #2b2b2b;
                      padding: 18px;
                      border-radius: 10px;
                      text-align: center;
                    }
                  </style>
                  <div class="card">
                    <h3>ðŸ“„ Document PiP</h3>
                    <p>Opened from about:blank</p>
                  </div>
                \`;
              } catch (e) {
                alert("PiP failed: " + e);
              }
            };
          <\/script>
        </body>
        </html>
      `);
      w.document.close();
      w.focus();
    }
  </script>
</body>
</html>
