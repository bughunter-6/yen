<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Site A â€“ RP / Top Level</title>
<style>
body { font-family: monospace; }
iframe { width: 100%; height: 260px; border: 1px solid #000; }
pre { background:#000; color:#0f0; padding:10px; }
</style>
</head>
<body>

<h2>Site A (Top-Level)</h2>
<pre id="log"></pre>

<script>
const log = m => logEl.textContent += m + "\n";
const logEl = document.getElementById("log");

/* OAuth / Federated Login window */
function oauth() {
  const w = window.open(
    "https://accounts.google.com",
    "_blank",
    "width=500,height=650"
  );
  log(w ? "OAuth popup opened" : "Popup blocked");
}

/* FDCM (surface only without IdP backend) */
async function fdcm() {
  if (!("FederatedCredential" in window)) {
    log("FDCM not supported");
    return;
  }
  try {
    await navigator.credentials.get({
      federated: {
        providers: ["https://barathstalin6.github.io/summa/siteb.html"]
      }
    });
    log("FDCM request sent");
  } catch {
    log("FDCM canceled / blocked");
  }
}

/* WebAuthn RP ID capability */
function rpid() {
  log(
    window.PublicKeyCredential
      ? "WebAuthn supported (RP ID = domain-A.com)"
      : "WebAuthn not supported"
  );
}
</script>

<button onclick="oauth()">OAuth / Federated Login</button>
<button onclick="fdcm()">FDCM Request</button>
<button onclick="rpid()">RP ID (WebAuthn)</button>

<h3>Third-Party Context (Site B)</h3>
<iframe src="https://barathstalin6.github.io/summa/siteb.html"></iframe>

</body>
</html>
